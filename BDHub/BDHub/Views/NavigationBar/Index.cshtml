@model IEnumerable<BDHub.Models.Video>

@{
    ViewBag.Title = "Bdots Home";



}

<script type="text/javascript">
    var notEnoughGoldMessage = "@ViewBag.Message";
    if (!(notEnoughGoldMessage===""))
        alert(notEnoughGoldMessage);

    function clickImage() {
        var tekst =@ViewBag.confirm+"nesto";
        
            return alert(tekst);
        }
</script>


@{ string getYouTubeThumbnail(string YoutubeUrl)
    {
        string youTubeThumb = string.Empty;
        if (YoutubeUrl == "")
            return "";

        if (YoutubeUrl.IndexOf("=") > 0)
        {
            youTubeThumb = YoutubeUrl.Split('=')[1];
        }
        else if (YoutubeUrl.IndexOf("/v/") > 0)
        {
            string strVideoCode = YoutubeUrl.Substring(YoutubeUrl.IndexOf("/v/") + 3);
            int ind = strVideoCode.IndexOf("?");
            youTubeThumb = strVideoCode.Substring(0, ind == -1 ? strVideoCode.Length : ind);
        }
        else if (YoutubeUrl.IndexOf('/') < 6)
        {
            youTubeThumb = YoutubeUrl.Split('/')[3];
        }
        else if (YoutubeUrl.IndexOf('/') > 6)
        {
            youTubeThumb = YoutubeUrl.Split('/')[1];
        }

        return "http://img.youtube.com/vi/" + youTubeThumb + "/mqdefault.jpg";
    }
    }

@{int funkcija(int id) {

        
        Response.Write(id);
        return 0;
    } }


<div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-3">
        <b>@Html.ActionLink("Title", "Index", new { sortOrder = ViewBag.TitleSortParm })</b>
    </div>

   

    <div class="col-md-3">

        <b>@Html.ActionLink("Views", "Index", new { sortOrder = ViewBag.ViewsSortParm })</b>
    </div>
    <div class="col-md-3">
        <p><b>@Html.ActionLink("Price", "Index", new { sortOrder = ViewBag.PriceSortParm })</b></p>
    </div>
</div>

@foreach (var item in Model)
{

<div class="row">
  
  
    
    <div class="col-md-3" >
        <h2>


           

            @Html.ActionLink(" ","IncrementViewCount", new { id = item.videoID }, new {
           style = "background: url("+Url.Content(getYouTubeThumbnail(item.filepath))+ ") no-repeat center ;display:block; height:146.25px; width:260px;",


           onclick = "return confirm('Are you sure you want to watch following video: \\n " +
                     "\\n Video title: " + @item.title +
                     "\\n Price: " + @item.price + " BDoken" +
                     "\\n Uploaded by: " + @item.CertUser.username + "')"
       })

        </h2>
    </div>


  
    <div class="col-md-3">
        <p><b>@item.title </b></p>
        <br />
        <p background-color="gray">@item.about</p>
    </div>



    <div class="col-md-3">

        <p>Owner > @item.CertUser.username </p>
        <p>Views > @item.viewsCount </p>
        

    </div>
    <div class="col-md-3">

        <p>Price > @item.price BDoken</p>
    </div>
</div>
}
